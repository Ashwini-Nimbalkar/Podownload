
scheduler=0 55 14 ? * *

DriverClassName=com.ibm.as400.access.AS400JDBCDriver
Username=SQLUSER
Password=SQLUSER
#RPLCINUSER
Url=jdbc:as400://10.43.100.120
#Url=jdbc:as400://10.43.99.220/poslibcin

sql.timer=timer:Sql?repeatCount=1&Delay=60000
seq.query=sql:SELECT FEEDSEQ FROM SOLOMONK.scmdtaseq WHERE FEED = 'APPOINTMENT'  and FEEDTYPE = 'DWNLD'?dataSource=#mydata

cinpodownload.query=sql:SELECT CASE WHEN (A.PROCDTE = INT(REPLACE(CHAR(CURRENT DATE - 100 DAY, ISO), '-', ''))) THEN 1 WHEN (A.PROCDTE <> INT(REPLACE(CHAR(CURRENT DATE - 100 DAY, ISO), '-', '')) AND A.MAINTDTE = INT(REPLACE(CHAR(CURRENT DATE - 100 DAY, ISO), '-', ''))) THEN 2 END AS ACTCODE,A.CTRLNO AS PONO,A.RUNNUM AS RECNO, A.SKN AS SKN, DATE(TIMESTAMP_FORMAT(CAST(A.SHIPDTE AS VARCHAR(8)), 'YYYYMMDD')) AS SHPDATE,        DATE(TIMESTAMP_FORMAT(CAST(A.ETABGNDTE AS VARCHAR(8)), 'YYYYMMDD')) AS ETABGN, DATE(TIMESTAMP_FORMAT(CAST(A.ETAENDDTE AS VARCHAR(8)), 'YYYYMMDD')) AS ETAEND, A.POQTYORD AS ORDERED,  A.POQTYRCVD AS RCVD, (A.POQTYORD - (A.POQTYRCVD + A.POQTYCANL)) AS OPEN, A.AREANO AS WHSE, B.STORENO AS LOC, CASE WHEN (A.OPENINDC = 'T') THEN 1  WHEN (A.CANLINDC = 'T') THEN 2 WHEN (A.OPENINDC = 'F') THEN 3        END AS STATUS,        DATE(TIMESTAMP_FORMAT(CAST(A.PROCDTE AS VARCHAR(8)), 'YYYYMMDD')) AS CRTDATE, CASE  WHEN  A.LSTRCPTDTE > 0 THEN SUBSTR(CHAR(A.LSTRCPTDTE), 1, 4) || '-' || SUBSTR(CHAR(A.LSTRCPTDTE), 5, 2) || '-' || SUBSTR(CHAR(A.LSTRCPTDTE), 7, 2) ELSE ' ' END AS LSTRCPTDTE, DATE(TIMESTAMP_FORMAT(CAST(A.MAINTDTE AS VARCHAR(8)), 'YYYYMMDD')) AS MAINTDTE, A.FOBCOST AS FOB, A.CURRCOST AS PO_COST, A.VNDRNO AS VENDORNO FROM TRUCIN.POITEM A JOIN SOLOMONK.POMPDSSQTY B ON A.AREANO = B.WAREHOUSE  AND A.SKN = B.SKN AND A.PKG = B.PKG  AND A.ETABGNDTE = B.ETADATE  WHERE (A.MAINTDTE = INT(REPLACE(CHAR(CURRENT DATE - 100 DAY, ISO), '-', ''))OR A.PROCDTE = INT(REPLACE(CHAR(CURRENT DATE - 100 DAY, ISO), '-', '')))ORDER BY A.PROCDTE,A.VNDRNO,A.CTRLNO,A.SKN?dataSource=#mydata
##cinpodownload.query=sql: SELECT CASE WHEN (A.PROCDTE = INT(REPLACE(CHAR(CURRENT DATE - 1 DAY, ISO), '-', ''))) THEN 1 WHEN (A.PROCDTE <> INT(REPLACE(CHAR(CURRENT DATE - 1 DAY, ISO), '-', '')) AND A.MAINTDTE = INT(REPLACE(CHAR(CURRENT DATE - 1 DAY, ISO), '-', ''))) THEN 2 END AS ACTCODE, A.CTRLNO AS PONO, A.RUNNUM AS RECNO, A.SKN AS SKN, DATE(TIMESTAMP_FORMAT(CAST(A.SHIPDTE AS VARCHAR(8)), 'YYYYMMDD')) AS SHPDATE, DATE(TIMESTAMP_FORMAT(CAST(A.ETABGNDTE AS VARCHAR(8)), 'YYYYMMDD')) AS ETABGN, DATE(TIMESTAMP_FORMAT(CAST(A.ETAENDDTE AS VARCHAR(8)), 'YYYYMMDD')) AS ETAEND, A.POQTYORD, A.POQTYRCVD, (A.POQTYORD - (A.POQTYRCVD + A.POQTYCANL)) AS OPENQTY,  A.AREANO,  CASE WHEN (A.OPENINDC = 'T') THEN 1 WHEN (A.CANLINDC = 'T') THEN 2 WHEN (A.OPENINDC = 'F') THEN 3 END AS STATUS, DATE(TIMESTAMP_FORMAT(CAST(A.PROCDTE AS VARCHAR(8)), 'YYYYMMDD')) AS CRTDATE, CASE WHEN A.LSTRCPTDTE > 0 THEN SUBSTR(CHAR(A.LSTRCPTDTE), 1, 4) || '-' || SUBSTR(CHAR(A.LSTRCPTDTE), 5, 2) || '-' || SUBSTR(CHAR(A.LSTRCPTDTE), 7, 2) ELSE ' ' END AS LSTRCPTDTE, DATE(TIMESTAMP_FORMAT(CAST(A.MAINTDTE AS VARCHAR(8)), 'YYYYMMDD')) AS MAINTDTE, A.FOBCOST AS FOB, A.CURRCOST AS PO_COST, A.VNDRNO AS VENDORNO FROM trucin.POITEM A WHERE (A.MAINTDTE = INT(REPLACE(CHAR(CURRENT DATE - 1 DAY, ISO), '-', '')) OR A.PROCDTE = INT(REPLACE(CHAR(CURRENT DATE - 95 DAY, ISO), '-', ''))) ORDER BY A.PROCDTE, A.VNDRNO, A.CTRLNO, A.SKN?dataSource=#mydata
##posp067.query=sql:SELECT DISTINCT A.ACTCODE,A.SKN,A.CATEGORY,A.SUBCAT,A.NATLSTAT,A.BIGTKTFLG,A.SECURFLG,A.TKTTYPE, REGEXP_REPLACE( A.MFRNAME,'[^a-zA-Z0-9\s():-]', '') AS MFRNAME,A.MFRNO as MFR,(CAST(CAST(B.CUSTDESC1 AS VARCHAR(255) CCSID 65535) AS VARCHAR(255) CCSID 935)) AS CUSTDESC1, (CAST(CAST(B.CUSTDESC2 AS VARCHAR(255) CCSID 65535) AS VARCHAR(255) CCSID 935)) AS CUSTDESC2, A.TAXCODE,A.TAXPCT,A.NOFACINGS,A.CURRETAIL,A.INVPCS,A.PCFLAG,A.BATREQFLG,A.DOCNBR,A.EFFDATE,A.TAXFLG,C.FOBCOST,C.VNDRNO, REGEXP_REPLACE(D.MPNAME, '[^a-zA-Z0-9\s():-]', '') AS MPNAME,C.MFRNO,CAST(CAST(E.SELLUNIT AS VARCHAR(255) CCSID 65535) AS VARCHAR(255) CCSID 935) SELLUNIT,CAST(CAST(E.ORIGPLACE AS VARCHAR(255) CCSID 65535) AS VARCHAR(255) CCSID 935) ORIGPLACE FROM TRUCIN.ITEMCNTRY B,POSLIBCIN.POSP067S A,TRUCIN.ITEMST C LEFT OUTER JOIN CINONLY.CINP001 E ON C.SKN = E.SKN LEFT OUTER JOIN TRUCIN.MPBNAM D ON D.VNDRMPBNO = C.VNDRMPBNO WHERE A.SKN = B.SKN AND A.SKN = C.SKN AND A.STORENO= :#storeno?dataSource=#mydata
cinpodownload.path=file:/opt/esb/PODOWN/Files/Sql-Files?recursive=true&delay=5000&synchronous=true


cinpodownloadsqlfiles.path=file:/opt/esb/PODOWN/Files/Sql-Files/HOME/POAPP/HKG/CIN?fileName=CIN_PO_${date:now:yyyyMMdd}_${header.seq}.txt
outboundfiles.path=file:/opt/esb/PO-Download/OutboundFiles
outboundfiles.parameter=?delete=true&delay=20000

efuture.path=sftp://ftpuser@10.187.243.246/AS400/download?password=0mhQqwXi68tRVugE7fDK&useUserKnownHostsFile=false&disconnect=true&stepwise=false
##efuture.path=sftp://@10.190.251.211/data/sftp/as400/download/po?password=sftp&2025&useUserKnownHostsFile=false&disconnect=true&stepwise=false
as400files.backup=file:/opt/esb/PO-Down?fileName=backup/${date:now:yyyyMMdd}/${file:name.noext}.zip

unzip.path=file:/opt/esb/as400-pos/unzip?delete=true
errorZip.path=file:/opt/esb/as400-pos/error